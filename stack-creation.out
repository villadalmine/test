[I] ~/v/r/r/a/t/playbook (master ⚡☡=) ansible-playbook -i ec2.py  aws-provision.yaml
 [WARNING]: provided hosts list is empty, only localhost is available


PLAY [Provision Stack Aws] *****************************************************************************************************************************************************************************************************************************************************

TASK [Gathering Facts] *********************************************************************************************************************************************************************************************************************************************************
ok: [localhost]

TASK [Remove ssh.cfg config] ***************************************************************************************************************************************************************************************************************************************************
changed: [localhost]

TASK [Run my CloudFormation stack] *********************************************************************************************************************************************************************************************************************************************
changed: [localhost]

TASK [debug] *******************************************************************************************************************************************************************************************************************************************************************
ok: [localhost] => {
    "ec2_awsecs_stack": {
        "changed": true,
        "events": [
            "StackEvent AWS::CloudFormation::Stack Aws-ECS-awsec2-dev CREATE_COMPLETE",
            "StackEvent AWS::EC2::Instance EC2Instance CREATE_COMPLETE",
            "StackEvent AWS::EC2::Instance EC2Instance CREATE_IN_PROGRESS",
            "StackEvent AWS::EC2::Instance EC2Instance CREATE_IN_PROGRESS",
            "StackEvent AWS::EC2::SecurityGroup InstanceSecurityGroup CREATE_COMPLETE",
            "StackEvent AWS::EC2::SecurityGroup InstanceSecurityGroup CREATE_IN_PROGRESS",
            "StackEvent AWS::EC2::SecurityGroup InstanceSecurityGroup CREATE_IN_PROGRESS",
            "StackEvent AWS::CloudFormation::Stack Aws-ECS-awsec2-dev CREATE_IN_PROGRESS"
        ],
        "log": [],
        "output": "Stack CREATE complete",
        "stack_outputs": {
            "AZ": "us-east-2c",
            "InstanceId": "i-0c384b6e3b605fa3f",
            "PublicDNS": "ec2-18-218-243-71.us-east-2.compute.amazonaws.com",
            "PublicIP": "18.218.243.71"
        },
        "stack_resources": [
            {
                "last_updated_time": "2018-01-29T14:47:52.152000+00:00",
                "logical_resource_id": "EC2Instance",
                "physical_resource_id": "i-0c384b6e3b605fa3f",
                "resource_type": "AWS::EC2::Instance",
                "status": "CREATE_COMPLETE",
                "status_reason": null
            },
            {
                "last_updated_time": "2018-01-29T14:47:32.741000+00:00",
                "logical_resource_id": "InstanceSecurityGroup",
                "physical_resource_id": "Aws-ECS-awsec2-dev-InstanceSecurityGroup-HRYY4QKFWWTH",
                "resource_type": "AWS::EC2::SecurityGroup",
                "status": "CREATE_COMPLETE",
                "status_reason": null
            }
        ]
    }
}

TASK [debug] *******************************************************************************************************************************************************************************************************************************************************************
ok: [localhost] => {
    "ec2_awsecs_stack.stack_outputs.InstanceId": "i-0c384b6e3b605fa3f"
}

TASK [debug] *******************************************************************************************************************************************************************************************************************************************************************
ok: [localhost] => {
    "ec2_awsecs_stack.stack_outputs.PublicIP": "18.218.243.71"
}

TASK [set_fact] ****************************************************************************************************************************************************************************************************************************************************************
ok: [localhost]

TASK [debug] *******************************************************************************************************************************************************************************************************************************************************************
ok: [localhost] => {
    "ipaddress": "18.218.243.71"
}

TASK [configure sshcfg file] ***************************************************************************************************************************************************************************************************************************************************
changed: [localhost]

TASK [Wait for server to restart] **********************************************************************************************************************************************************************************************************************************************
ok: [localhost -> localhost]

TASK [definition of 18.218.243.71] *********************************************************************************************************************************************************************************************************************************************
changed: [localhost]

TASK [Save ipAddres of devstack] ***********************************************************************************************************************************************************************************************************************************************
changed: [localhost -> localhost]

TASK [Refresh EC2 cache] *******************************************************************************************************************************************************************************************************************************************************
changed: [localhost]

PLAY [Set up instances] ********************************************************************************************************************************************************************************************************************************************************

TASK [Gathering Facts] *********************************************************************************************************************************************************************************************************************************************************
ok: [18.218.243.71]

TASK [base : include] **********************************************************************************************************************************************************************************************************************************************************
included: /Users/restaurador/violeta/repos/rino/aws/test/playbook/roles/base/tasks/base-yum.yml for 18.218.243.71

TASK [base : OS upgrade] *******************************************************************************************************************************************************************************************************************************************************
ok: [18.218.243.71]

TASK [base : Install list of packages] *****************************************************************************************************************************************************************************************************************************************
changed: [18.218.243.71] => (item=[u'docker', u'mc', u'git'])

TASK [base : Make sure docker is running] **************************************************************************************************************************************************************************************************************************************
changed: [18.218.243.71]

TASK [base : Install docker-compose] *******************************************************************************************************************************************************************************************************************************************
 [WARNING]: Consider using get_url or uri module rather than running curl

changed: [18.218.243.71]

TASK [base : Set permission to docker-compose] *********************************************************************************************************************************************************************************************************************************
 [WARNING]: Consider using file module with mode rather than running chmod

changed: [18.218.243.71]

TASK [base : Update ec2-user to use docker] ************************************************************************************************************************************************************************************************************************************
changed: [18.218.243.71]

TASK [base : Passwordless sudo] ************************************************************************************************************************************************************************************************************************************************
 [WARNING]: when statements should not include jinja2 templating delimiters such as {{ }} or {% %}. Found: {{passwordless_sudo}}

changed: [18.218.243.71]

TASK [base : Create user test] *************************************************************************************************************************************************************************************************************************************************
changed: [18.218.243.71]

TASK [base : Change root password] *********************************************************************************************************************************************************************************************************************************************
changed: [18.218.243.71]

PLAY [Set up instances] ********************************************************************************************************************************************************************************************************************************************************

TASK [Gathering Facts] *********************************************************************************************************************************************************************************************************************************************************
ok: [18.218.243.71]

TASK [dockercompose : Create wordpress compose directory] **********************************************************************************************************************************************************************************************************************
 [WARNING]: when statements should not include jinja2 templating delimiters such as {{ }} or {% %}. Found: {{ wordpressdbdeploy }}

 [WARNING]: Consider using file module with state=directory rather than running mkdir

changed: [18.218.243.71]

TASK [dockercompose : Create wordpress compose file] ***************************************************************************************************************************************************************************************************************************
 [WARNING]: when statements should not include jinja2 templating delimiters such as {{ }} or {% %}. Found: {{ wordpressdbdeploy }}

changed: [18.218.243.71]

TASK [dockercompose : Run Docker-compose] **************************************************************************************************************************************************************************************************************************************
 [WARNING]: when statements should not include jinja2 templating delimiters such as {{ }} or {% %}. Found: {{ wordpressdbdeploy }}

 [WARNING]: Consider using 'become', 'become_method', and 'become_user' rather than running sudo

changed: [18.218.243.71]

TASK [dockercompose : Create collector compose directory] **********************************************************************************************************************************************************************************************************************
 [WARNING]: when statements should not include jinja2 templating delimiters such as {{ }} or {% %}. Found: {{ nodeexportercadvisor }}

changed: [18.218.243.71]

TASK [dockercompose : Create collect compose file] *****************************************************************************************************************************************************************************************************************************
 [WARNING]: when statements should not include jinja2 templating delimiters such as {{ }} or {% %}. Found: {{ nodeexportercadvisor }}

changed: [18.218.243.71]

TASK [dockercompose : Run Docker-compose] **************************************************************************************************************************************************************************************************************************************
 [WARNING]: when statements should not include jinja2 templating delimiters such as {{ }} or {% %}. Found: {{ nodeexportercadvisor }}

changed: [18.218.243.71]

PLAY RECAP *********************************************************************************************************************************************************************************************************************************************************************
18.218.243.71              : ok=18   changed=14   unreachable=0    failed=0
localhost                  : ok=13   changed=6    unreachable=0    failed=0

[I] ~/v/r/r/a/t/playbook (master ⚡☡=)
